<div class="container">
  <h3>History</h3>
  <mat-tab-group mat-stretch-tabs>
    <mat-tab label="Day-wise">
      <mat-spinner class="spinner" *ngIf="loading"></mat-spinner>
  <mat-accordion *ngIf="!loading">
    <div></div> <!-- so that margin-top of first element is not set to 0 -->
    <div *ngFor="let date of dates">
      <div class="date">{{ date }}</div>
      <mat-expansion-panel *ngFor="let token of grouped_tokens[date]" [expanded]="token._id === init_id">
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{ format(token.date) }}:
          </mat-panel-title>
          <mat-panel-description>
            Cost: &#8377;{{ getCost(token) }}
          </mat-panel-description>
        </mat-expansion-panel-header>

        <table mat-table [dataSource]="token.dishes" class="mat-elevation-z1 dishes">
          <ng-container matColumnDef="Dish">
            <th mat-header-cell *matHeaderCellDef> Dish </th>
            <td mat-cell *matCellDef="let dish"> {{dish.name}} (&#8377;{{dish.price}}) </td>
            <td mat-footer-cell *matFooterCellDef> Total Cost </td>
          </ng-container>
        
          <ng-container matColumnDef="Quantity">
            <th mat-header-cell *matHeaderCellDef> Quantity </th>
            <td mat-cell *matCellDef="let dish"> {{dish.quantity}} </td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>

          <ng-container matColumnDef="Cost">
            <th mat-header-cell *matHeaderCellDef> Cost </th>
            <td mat-cell *matCellDef="let dish"> &#8377;{{dish.price * dish.quantity}} </td>
            <td mat-footer-cell *matFooterCellDef> &#8377;{{ getCost(token) }} </td>
          </ng-container>
        
          <tr mat-header-row *matHeaderRowDef="['Dish', 'Quantity', 'Cost']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['Dish', 'Quantity', 'Cost'];"></tr>
          <tr mat-footer-row *matFooterRowDef="['Dish', 'Quantity', 'Cost']"></tr>
        </table>
      </mat-expansion-panel>
    </div>
    <div></div> <!-- so that margin-bottom of last element is not set to 0 -->
  </mat-accordion>
    </mat-tab>
    <mat-tab label="Month-wise">
      <mat-spinner class="spinner" *ngIf="loading"></mat-spinner>
      <mat-accordion *ngIf="!loading">
        <div class="passes">
        <mat-card class="center"></mat-card>
        </div>
      </mat-accordion>
    </mat-tab>
  </mat-tab-group>
</div>
